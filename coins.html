<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Coins</title>

<style>
body{
  margin:0;
  background:#0b1220;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
}
.search{
  padding:10px;
}
input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  outline:none;
}
.coin{
  display:flex;
  justify-content:space-between;
  padding:12px;
  border-bottom:1px solid #1f2a44;
  cursor:pointer;
}
.coin:hover{background:#111a33;}
.green{color:#2ecc71; animation:blink 0.5s;}
.red{color:#e74c3c; animation:blink 0.5s;}
@keyframes blink{
  0%{opacity:0.5}
  100%{opacity:1}
}

/* modal */
.modal{
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
}
.box{
  background:#121c35;
  width:90%;
  border-radius:12px;
  padding:15px;
}
.btn{
  width:48%;
  padding:10px;
  border:none;
  border-radius:8px;
  color:#fff;
  cursor:pointer;
}
.deposit{background:#2ecc71;}
.withdraw{background:#e67e22;}
</style>
</head>

<body>

<div class="search">
  <input id="search" placeholder="Search coin...">
</div>

<div id="coins"></div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="box">
    <h3 id="m-name"></h3>
    <p>Price: $<span id="m-price"></span></p>
    <p>24h: <span id="m-change"></span>%</p>
    <p>Market Cap: $<span id="m-cap"></span></p>
    <p>Volume: $<span id="m-vol"></span></p>

    <div style="display:flex;justify-content:space-between">
      <button class="btn deposit">Deposit</button>
      <button class="btn withdraw">Withdraw</button>
    </div>
  </div>
</div>

<script>
const API =
"https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=300&page=1&sparkline=false&price_change_percentage=24h";

let coinsData=[];

async function loadCoins(){
  const res = await fetch(API);
  coinsData = await res.json();
  renderCoins(coinsData.slice(0,10));
}
loadCoins();
setInterval(loadCoins,30000);

function renderCoins(data){
  const box=document.getElementById("coins");
  box.innerHTML="";
  data.forEach(c=>{
    const div=document.createElement("div");
    div.className="coin";
    div.innerHTML=`
      <span>${c.symbol.toUpperCase()}</span>
      <span class="${c.price_change_percentage_24h>=0?'green':'red'}">
        $${c.current_price}
      </span>`;
    div.onclick=()=>openModal(c);
    box.appendChild(div);
  });
}

document.getElementById("search").oninput=e=>{
  const v=e.target.value.toLowerCase();
  renderCoins(coinsData.filter(c=>c.name.toLowerCase().includes(v)));
};

function openModal(c){
  document.getElementById("modal").style.display="flex";
  document.getElementById("m-name").innerText=c.name;
  document.getElementById("m-price").innerText=c.current_price;
  document.getElementById("m-change").innerText=c.price_change_percentage_24h.toFixed(2);
  document.getElementById("m-cap").innerText=c.market_cap;
  document.getElementById("m-vol").innerText=c.total_volume;
}
document.getElementById("modal").onclick=e=>{
  if(e.target.id==="modal") e.target.style.display="none";
};
</script>

</body>
</html>
